<!DOCTYPE html>
<html>
<head>
    <title>Test Imports - Diagnostic Refactoring</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }
        #output {
            background: #252526;
            padding: 15px;
            border-radius: 4px;
            line-height: 1.6;
        }
        .success { color: #4ec9b0; }
        .error { color: #f48771; }
        .info { color: #569cd6; }
    </style>
</head>
<body>
    <h1>üîß Test des imports apr√®s refactoring</h1>
    <div id="output">Chargement...</div>

    <script type="module">
        const output = document.getElementById('output');
        output.innerHTML = '';

        function log(message, type = 'info') {
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : 'info';
            output.innerHTML += `<div class="${className}">${message}</div>`;
        }

        try {
            // Test 1: Import api/index.js
            log('üîÑ Test import api/index.js...');
            const api = await import('./js/api/index.js');
            const apiExports = Object.keys(api);
            log(`‚úÖ API import√© : ${apiExports.length} exports`, 'success');
            log(`   Exports: ${apiExports.slice(0, 10).join(', ')}...`, 'info');

            // Test 2: Import ui/index.js
            log('üîÑ Test import ui/index.js...');
            const ui = await import('./js/ui/index.js');
            const uiExports = Object.keys(ui);
            log(`‚úÖ UI import√© : ${uiExports.length} exports`, 'success');
            log(`   Exports: ${uiExports.slice(0, 10).join(', ')}...`, 'info');

            // Test 3: Import utils/colors.js
            log('üîÑ Test import utils/colors.js...');
            const colors = await import('./js/utils/colors.js');
            const colorsExports = Object.keys(colors);
            log(`‚úÖ Colors import√© : ${colorsExports.length} exports`, 'success');
            log(`   Exports: ${colorsExports.join(', ')}`, 'info');

            // Test 4: Import utils/positioning.js
            log('üîÑ Test import utils/positioning.js...');
            const positioning = await import('./js/utils/positioning.js');
            const positioningExports = Object.keys(positioning);
            log(`‚úÖ Positioning import√© : ${positioningExports.length} exports`, 'success');
            log(`   Exports: ${positioningExports.join(', ')}`, 'info');

            // Test 5: Import app.js (principal)
            log('üîÑ Test import app.js...');
            await import('./js/app.js');
            log(`‚úÖ app.js import√© avec succ√®s`, 'success');

            log('');
            log('‚úÖ ‚úÖ ‚úÖ TOUS LES IMPORTS FONCTIONNENT ! ‚úÖ ‚úÖ ‚úÖ', 'success');
            log('Le refactoring est correct, vous pouvez utiliser le site normalement.', 'success');

        } catch (error) {
            log('');
            log(`‚ùå ERREUR D√âTECT√âE : ${error.message}`, 'error');
            log(`Fichier: ${error.fileName || 'inconnu'}`, 'error');
            log(`Ligne: ${error.lineNumber || 'inconnue'}`, 'error');
            log('');
            log('Stack trace:', 'error');
            log(error.stack, 'error');
        }
    </script>
</body>
</html>
